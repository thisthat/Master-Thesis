<div class="modal hide fade" id="myModal">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">Ã—</button>
			<h3>Admin Settings</h3>
		</div>
		<div class="modal-body">
			

<ul class="nav nav-tabs tabsAdmin">
  <li role="presentation" class="active tab1 tab" data-show="general"><a href="#">General</a></li>
  <li role="presentation" class="tab2 tab" data-show="switch"><a href="#">Switch Information</a></li>
  <li role="presentation" class="tab3 tab" data-show="dataset"><a href="#">Dataset</a></li>
</ul>

<!-- First Tab -->
<div class="admin-general">
	<div class="bs-example" data-example-id="panel-with-footer">
	    <div class="panel panel-default">
	      <div class="panel-body">
	        Time in seconds to wait before rebuild the topology:
	        <span class="time">300 [s]</span>
	      </div>
	    </div>
	  </div>
	 <div class="zero-clipboard"></div>
	<div class="highlight">
		<div id="secondTopologyBuild"></div>
		<button type="button" class="btn btn-default btn-lg rebuidTopo">
		  <span class="halflings-icon refresh" aria-hidden="true"></span> Rebuild Now!
		</button>
	</div>
	<div class="bs-example" data-example-id="panel-with-footer">
	    <div class="panel panel-default">
	      <div class="panel-body">
	        MongoDB information
	      </div>
	    </div>
	  </div>
	 <div class="zero-clipboard"></div>
	<div class="highlight">
		<div class="input-group">
		  <span class="input-group-addon" id="basic-addon1">IP&nbsp;&nbsp;&nbsp;&nbsp;</span>
		  <input type="text" id="mongoIP" class="form-control" placeholder="IP" aria-describedby="basic-addon1">
		</div>
		<div class="clear-fix"></div>
		<div class="input-group">
		  <span class="input-group-addon" id="basic-addon1">Port</span>
		  <input type="text" id="mongoPort" class="form-control" placeholder="Port" aria-describedby="basic-addon1">
		</div>
	</div>
</div>

<!-- Second Tab -->
<div class="admin-switch">
	<div class="bs-example tab2-data" data-example-id="list-group-custom-content">
		
	</div>
</div>


<!-- Third Tab -->
<div class="admin-dataset">
	<div class="bs-example tab3-data" data-example-id="list-group-custom-content">
		bla bla
	</div>
</div>


		</div>
		<div class="modal-footer">
			<a href="#" class="btn" data-dismiss="modal">Close</a>
			<a href="#" class="btn btn-primary ">Save changes</a>
		</div>
	</div>


<script>
$(function(){
	var __time = 300;
	var __ipMongo = "127.0.0.1";
	var __portMongo = "27017";
	init();


	function init(){
		$('#myModal').modal('show');
		//Trigger to change tab
		$(".tab").on('click', function(){
			$(".tabsAdmin").find("li").each(function( index ) {
			 	$(this).removeClass("active");
			 	var active = ".admin-" + $(this).attr('data-show');
			 	$(active).hide();
			});

			$(this).addClass("active");
			var active = ".admin-" + $(this).attr('data-show');
			$(active).show();
		});


		//Start with General Tab
		$(".tab1").trigger("click");

		//Load the slide for set the TimeOut
		loadTimeOut();

		//Get Mongo Info
		loadMongo();

		//Fill the second tab with switch
		loadSwitch();

		//Fill the third tab with dataset info
		loadDataset();

		//Handle the reload of a model
		$(".tab2-data").on('click', 'button',function(){
			var dpid = $(this).attr('data-sw');
			$.getJSON( "api/prediction/" + dpid + "/reload", function( res ) { 
				console.log(res);
				loadSwitch();
			});
		});
	}

	function sendTime(){
		var s = $( "#secondTopologyBuild" ).slider( "value" );
		__time = s;
		var $spanTime = $("#secondTopologyBuild").parent().parent().find(".time");
		$spanTime.html( s + " [s]");
	}

	function loadTimeOut(){
		$.getJSON( "api/prediction/timeout", function( time ) {
			__time = time.timeout / 1000;
			$( "#secondTopologyBuild" ).slider({
		      orientation: "horizontal",
		      range: "min",
		      max: 600,
		      min: 1,
		      value: __time,
		      slide: sendTime,
		      change: sendTime
		    });
			$( "#secondTopologyBuild" ).slider( "value", __time );
		});
	}
	function loadSwitch(){
		console.log("Load Switch");
		$(".tab2-data").html("");
		$.getJSON( "api/prediction/all/info", function( prediction ) {
			for(var i in prediction){
				var sw = prediction[i];
				var time = sw.loadedAt;
				var html = '<div class="bs-example" data-example-id="list-group-custom-content">';
				html += '<div class="list-group">';
				html += '<a href="#" class="list-group-item active">';
				html += '<h4 class="list-group-item-heading" id="list-group-item-heading">' + sw.dpid;
				html += '<a class="anchorjs-link" href="#"><span class="anchorjs-icon"></span></a></h4>'
				html += '<p class="list-group-item-text">';
				html += 'Classifier: ' + sw.classifier + ' <br />';
				html += 'Model loaded @:' + time;
				html += '<button type="button" style="margin-left: 20px;" class="btn btn-info reload" data-sw="' + sw.dpid + '">';
				html += '<span class="halflings-icon refresh" aria-hidden="true"></span>';
				html += '</button></p>';
				html += '</a>';
				html += '</div>';
				html += '</div>';
				$(".tab2-data").append(html);
				// glyphicons-icon refresh
			}
		});
	}
	function loadMongo(){
		$.getJSON( "api/controller/mongoDB", function( mongo ) {
			__ipMongo = mongo.ip;
			__portMongo = mongo.port;
			$("#mongoIP").val(__ipMongo);
			$("#mongoPort").val(__portMongo);
		});
	}


	function loadDataset(){
		console.log("Load Dataset");
		$(".tab3-data").html("");
		$.getJSON( "api/prediction/all/dataset", function( info ) {
			for(var i in info){
				var sw = info[i];
				var lags = sw.lags;
				var dpid = sw.dpid;
				var deri = sw.derivative;
				var size = sw.classSize;
				var html;

				html  = '<div class="bs-example" data-example-id="list-group-custom-content">';
				html += '<div class="list-group">';
				html += '<a href="#" class="list-group-item active">';
				html += '<h4 class="list-group-item-heading" id="list-group-item-heading">' + dpid;
				html += '<a class="anchorjs-link" href="#"><span class="anchorjs-icon"></span></a></h4>'
				html += '<p class="list-group-item-text">';

				html += "Class size: <select class='classSize' data-dpid='" + dpid + "'>";
					html += "<option " + (size == "200" ? "SELECTED" : "") + "> 200KB </option>"; 
					html += "<option " + (size == "500" ? "SELECTED" : "") + "> 500KB </option>"; 
					html += "<option " + (size == "1000" ? "SELECTED" : "") + "> 1000KB </option>";  
				html += "</select>";
				html += "<br />";
				html += "Lags: <select class='lags' data-dpid='" + dpid + "'>";
					html += "<option " + (lags == "5" ? "SELECTED" : "") + "> 5 </option>"; 
					html += "<option " + (lags == "8" ? "SELECTED" : "") + "> 8 </option>"; 
					html += "<option " + (lags == "10" ? "SELECTED" : "") + "> 10 </option>";  
				html += "</select>";
				html += "<br />";
				html += "Derivative: <input type='checkbox' class='derivative'"+ (deri == "true" ? "CHECKED" : "") + " data-dpid='" + dpid + "'>";


				html += '</p>';
				html += '</a>';
				html += '</div>';
				html += '</div>';
				$(".tab3-data").append(html);
				// glyphicons-icon refresh
			}
		});
	}


	function save(){
		saveTime();
		saveMongo();
		saveDataset();
	}

	function saveTime(){
		$.post( "ajax/test.html", function( data ) {
		  	$( ".result" ).html( data );
		});
	};



	function saveMongo(){};
	function saveDataset(){};

})

</script>